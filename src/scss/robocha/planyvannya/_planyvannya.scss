:root {
  --primary: #004d26;
  --bg: #f9f9f9;
  --light: #fff;
  --border: #ddd;
  --scheduled: #ffefb3;
  --no-show: #ffb3b3;
  --in-progress: #b3e6cc;
  --repaired: #e6e6e6;
}

* { margin: 0; padding: 0; box-sizing: border-box; }
body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: var(--bg); height: 100vh; overflow: hidden; }

.planning-container { display: flex; flex-direction: column; height: 100vh; }

/* HEADER */
.header {
  background: var(--primary);
  color: white;
  padding: 12px 24px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  box-shadow: 0 4px 10px rgba(0,0,0,0.1);
  .header-left { font-size: 20px; font-weight: 600; }
  .header-center {
    display: flex;
    align-items: center;
    gap: 16px;
    button { background: rgba(255,255,255,0.15); border: none; color: white; padding: 8px 16px; border-radius: 6px; cursor: pointer; font-size: 14px; }
    #currentDate { font-size: 17px; min-width: 260px; text-align: center; font-weight: 500; }
    button:nth-child(2), button:nth-child(3) { font-size: 28px; padding: 4px 20px; }
  }
}

/* MAIN */
.main-content { display: flex; flex: 1; overflow: hidden; }

/* SIDEBAR */
.sidebar {
  width: 280px;
  background: var(--light);
  border-right: 1px solid var(--border);
  overflow-y: auto;
  padding: 16px 12px;
}
.shop {
  margin-bottom: 20px;
  .shop-header {
    background: #f0f0f0;
    padding: 10px 14px;
    border-radius: 8px;
    font-weight: 600;
    display: flex;
    justify-content: space-between;
    align-items: center;
    cursor: pointer;
    .toggle { background:none; border:none; font-size:16px; cursor:pointer; transition:0.2s; }
  }
  .posts {
    transition: max-height 0.3s;
    overflow: hidden;
    .post {
      background: #fafafa;
      border-left: 4px solid var(--primary);
      padding: 12px 16px;
      margin: 6px 0;
      border-radius: 0 8px 8px 0;
      height: 76px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      .title { font-weight: 600; }
      .subtitle { font-size: 12px; color: #666; margin-top: 4px; }
    }
  }
  &.collapsed .posts { max-height: 0 !important; }
}
.add-reminder {
  margin: 20px 12px 0;
  padding: 12px;
  width: calc(100% - 24px);
  border: 2px dashed #ccc;
  background: none;
  border-radius: 8px;
  cursor: pointer;
  font-size: 14px;
}

/* КАЛЕНДАР */
.calendar-wrapper {
  flex: 1;
  display: flex;
  flex-direction: column;
  background: white;
}
.time-header {
  display: grid;
  grid-template-columns: repeat(12, 1fr);
  border-bottom: 2px solid var(--border);
  padding: 0 24px;
  > div {
    text-align: center;
    padding: 12px 0 8px;
    font-size: 14px;
    position: relative;
    sup { font-size: 10px; opacity: 0.7; }
    &:not(:last-child)::after {
      content: '';
      position: absolute;
      right: 0; top: 12px; bottom: 12px;
      width: 1px;
      background: var(--border);
    }
  }
}
.calendar-content {
  flex: 1;
  position: relative;
  overflow: hidden;
}
#grid {
  height: 100%;
  overflow-y: auto;
  padding: 16px 24px 50px;
}
.shop-row {
  margin-bottom: 30px;
  .shop-title {
    background: #f0f0f0;
    padding: 10px 16px;
    border-radius: 8px;
    font-weight: 600;
    margin-bottom: 8px;
  }
  .post-row {
    height: 76px;
    background: #fcfcfc;
    border: 1px solid #eee;
    border-radius: 8px;
    margin-bottom: 6px;
    position: relative;
    display: grid;
    grid-template-columns: repeat(24, 1fr);
  }
}
.appointment {
  position: absolute;
  background: #ffefb3;
  border-radius: 6px;
  padding: 6px 10px;
  font-size: 11.5px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
  cursor: pointer;
  overflow: hidden;
  &.no-show { background: var(--no-show); }
  &.in-progress { background: var(--in-progress); }
  &.repaired { background: var(--repaired); }
  &:hover { transform: translateY(-3px); box-shadow: 0 6px 12px rgba(0,0,0,0.2); z-index: 10; }
}
.grid-lines {
  position: absolute;
  top: 0; left: 24px; right: 24px; bottom: 0;
  pointer-events: none;
  display: grid;
  grid-template-columns: repeat(24, 1fr);
  > div {
    border-right: 1px solid #eee;
    &:nth-child(even) { border-color: #ddd; }
  }
}

/* ПРАВА ПАНЕЛЬ */
.right-panel {
  width: 300px;
  background: white;
  border-left: 1px solid var(--border);
  padding: 20px;
  overflow-y: auto;
  .year-nav {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    button { background:none; border:none; font-size:24px; cursor:pointer; }
    span { font-size:18px; font-weight:600; }
  }
  .month {
    margin-bottom: 30px;
    h3 { margin-bottom: 10px; font-size:14px; font-weight:600; }
    .weekdays {
      display: grid;
      grid-template-columns: repeat(7,1fr);
      text-align:center;
      font-size:12px;
      font-weight:600;
      color:#666;
      margin-bottom:8px;
    }
    .days {
      display: grid;
      grid-template-columns: repeat(7,1fr);
      gap:4px;
      span {
        aspect-ratio:1;
        display:flex;
        align-items:center;
        justify-content:center;
        border-radius:50%;
        cursor:pointer;
        font-size:13px;
        &.today { background:var(--primary); color:white; font-weight:bold; }
        &.selected { background:#ffe082; font-weight:bold; }
        &:hover { background:#f0f0f0; }
      }
    }
  }
  .legend {
    margin-top: 40px;
    padding-top: 20px;
    border-top: 1px solid var(--border);
    > div {
      display:flex;
      align-items:center;
      gap:10px;
      margin-bottom:10px;
      font-size:13px;
    }
    .color {
      width:20px;
      height:20px;
      border-radius:4px;
      display:inline-block;
      &.scheduled { background:var(--scheduled); }
      &.no-show { background:var(--no-show); }
      &.in-progress { background:var(--in-progress); }
      &.repaired { background:var(--repaired); }
    }
  }
}