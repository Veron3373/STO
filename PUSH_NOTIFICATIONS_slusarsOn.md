# üìã –î–û–ö–£–ú–ï–ù–¢–ê–¶–Ü–Ø: PUSH-–ü–û–í–Ü–î–û–ú–õ–ï–ù–ù–Ø –ü–†–û –ó–ê–í–ï–†–®–ï–ù–ù–Ø –†–û–ë–Ü–¢ –°–õ–Æ–°–ê–†–ï–ú

## üéØ –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏—Ö push-–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –∑–º—ñ–Ω —Å—Ç–∞—Ç—É—Å—É **slusarsOn** –≤ –∞–∫—Ç–∞—Ö.

### –ö–æ–ª–∏ —Å–ø—Ä–∞—Ü—å–æ–≤—É—î:

- ‚úÖ –°–ª—é—Å–∞—Ä –Ω–∞—Ç–∏—Å–∫–∞—î –∫–Ω–æ–ø–∫—É –∑–∞–º–∫–∞ —ñ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂—É—î –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ä–æ–±—ñ—Ç
- ‚úÖ –°–ª—é—Å–∞—Ä —Å–∫–∞—Å–æ–≤—É—î –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ä–æ–±—ñ—Ç (toggle slusarsOn: true ‚Üí false)

### –•—Ç–æ –æ—Ç—Ä–∏–º—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:

- üë®‚Äçüíº **–í—Å—ñ –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∏** (–±–∞—á–∞—Ç—å –≤—Å—ñ –∞–∫—Ç–∏)
- üë§ **–ö–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π –ü—Ä–∏–π–º–∞–ª—å–Ω–∏–∫** (—Ç–æ–π, —â–æ –∑–∞–ø–∏—Å–∞–Ω–∏–π –≤ `acts.pruimalnyk`)

### –©–æ –±–∞—á–∞—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ:

1. **–ú–∏—Ç—Ç—î–≤–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—ñ** (–∂–æ–≤—Ç–µ —Ñ–∞—Ä–±—É–≤–∞–Ω–Ω—è —Ä—è–¥–∫—ñ–≤)
2. **–û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–≥–æ–ª–æ–≤–∫–∞ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞** (–∂–æ–≤—Ç–∏–π –≥—Ä–∞–¥—ñ—î–Ω—Ç)
3. **–°–∏—Å—Ç–µ–º–Ω–µ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è** –≤–Ω–∏–∑—É —Å–ø—Ä–∞–≤–∞ –∑ —Ç–µ–∫—Å—Ç–æ–º: _"‚úÖ –°–ª—é—Å–∞—Ä [–ü—Ä—ñ–∑–≤–∏—â–µ] –∑–∞–≤–µ—Ä—à–∏–≤ —Ä–æ–±–æ—Ç–∏ –≤ –∞–∫—Ç—ñ ‚Ññ[123]"_

---

## üì¶ –°—Ç–≤–æ—Ä–µ–Ω—ñ —Ñ–∞–π–ª–∏

### 1. SQL –ú—ñ–≥—Ä–∞—Ü—ñ—è

**–§–∞–π–ª:** `supabase/create_slusar_notifications_table.sql`

**–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è:** –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—ñ `slusar_complete_notifications` –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü—ñ:**

```sql
CREATE TABLE slusar_complete_notifications (
    notification_id BIGSERIAL PRIMARY KEY,
    act_id INTEGER NOT NULL,
    act_number TEXT NOT NULL,
    completed_by_surname TEXT NOT NULL,
    completed_by_name TEXT,
    pruimalnyk TEXT,  -- –ü–Ü–ë –ü—Ä–∏–π–º–∞–ª—å–Ω–∏–∫–∞ (–¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó)
    viewed BOOLEAN DEFAULT false,
    delit BOOLEAN DEFAULT false,
    data TIMESTAMP WITH TIME ZONE DEFAULT now()
);
```

**RLS –ü–æ–ª—ñ—Ç–∏–∫–∏:**

- –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∏ –±–∞—á–∞—Ç—å –≤—Å—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
- –ü—Ä–∏–π–º–∞–ª—å–Ω–∏–∫–∏ –±–∞—á–∞—Ç—å —Ç—ñ–ª—å–∫–∏ —Å–≤–æ—ó (`pruimalnyk = —ó—Ö –ü–Ü–ë`)
- –°–ª—é—Å–∞—Ä—ñ –º–æ–∂—É—Ç—å —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è

**–Ü–Ω–¥–µ–∫—Å–∏:**

- `idx_slusar_notifications_act_id` - –ø–æ—à—É–∫ –ø–æ –∞–∫—Ç—É
- `idx_slusar_notifications_pruimalnyk` - —Ñ—ñ–ª—å—Ç—Ä –ø–æ –ø—Ä–∏–π–º–∞–ª—å–Ω–∏–∫—É
- `idx_slusar_notifications_viewed` - —Ñ—ñ–ª—å—Ç—Ä –ø–æ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏–º
- `idx_slusar_notifications_delit` - —Ñ—ñ–ª—å—Ç—Ä –ø–æ –≤–∏–¥–∞–ª–µ–Ω–∏–º

---

### 2. TypeScript –ú–æ–¥—É–ª—å

**–§–∞–π–ª:** `src/ts/roboha/zakaz_naraudy/inhi/slusar_notification_tracker.ts`

**–ï–∫—Å–ø–æ—Ä—Ç–æ–≤–∞–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó:**

#### `recordSlusarCompletion()`

–°—Ç–≤–æ—Ä—é—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–∏ –∑–º—ñ–Ω—ñ `slusarsOn`

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**

- `actId: number` - ID –∞–∫—Ç—É
- `actNumber: string` - –ù–æ–º–µ—Ä –∞–∫—Ç—É
- `slusarsOn: boolean` - –ù–æ–≤–∏–π —Å—Ç–∞—Ç—É—Å (true/false)
- `completedBySurname: string` - –ü—Ä—ñ–∑–≤–∏—â–µ –°–ª—é—Å–∞—Ä—è
- `completedByName?: string` - –ü–æ–≤–Ω–µ –ü–Ü–ë (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
- `pruimalnyk?: string` - –ü–Ü–ë –ü—Ä–∏–π–º–∞–ª—å–Ω–∏–∫–∞

**–ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–ª–∏–∫—É:**

```typescript
await recordSlusarCompletion(
  123,
  "456",
  true,
  "–Ü–≤–∞–Ω–µ–Ω–∫–æ",
  "–Ü–≤–∞–Ω–µ–Ω–∫–æ –Ü–≤–∞–Ω –Ü–≤–∞–Ω–æ–≤–∏—á",
  "–ü–µ—Ç—Ä–µ–Ω–∫–æ –ü–µ—Ç—Ä–æ"
);
```

#### `hideSlusarNotificationsForAct(actId: number)`

–•–æ–≤–∞—î –≤—Å—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–ª—è –∞–∫—Ç—É (–ø—Ä–∏ –∑–∞–∫—Ä–∏—Ç—Ç—ñ –∞–∫—Ç—É)

#### `getUnviewedSlusarNotificationsCount()`

–û—Ç—Ä–∏–º—É—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–µ–ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

#### `markSlusarNotificationAsViewed(notificationId: number)`

–ü–æ–∑–Ω–∞—á–∞—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —è–∫ –ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–µ

---

## üîó –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤ –∫–æ–¥

### 3. knopka_zamok.ts

**–ó–º—ñ–Ω–∏:**

1. **–Ü–º–ø–æ—Ä—Ç –º–æ–¥—É–ª—è:**

```typescript
import {
  recordSlusarCompletion,
  hideSlusarNotificationsForAct,
} from "./slusar_notification_tracker";
```

2. **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–∏ toggle slusarsOn:**

```typescript
// –ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ update –≤ –±–∞–∑—ñ –¥–∞–Ω–∏—Ö
await recordSlusarCompletion(
  actId,
  actNumber,
  newSlusarsOn,
  userSurname,
  userFullName,
  pruimalnyk
);
```

3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø—Ä–∏—Ö–æ–≤—É–≤–∞–Ω–Ω—è –ø—Ä–∏ –∑–∞–∫—Ä–∏—Ç—Ç—ñ –∞–∫—Ç—É:**

```typescript
// –ü—ñ—Å–ª—è update acts.date_off
await hideSlusarNotificationsForAct(actId);
```

---

### 4. tablucya.ts

**–ó–º—ñ–Ω–∏:**

**–î–æ–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è:**

```typescript
function subscribeToSlusarNotifications() {
  // –ü—ñ–¥–ø–∏—Å—É—î—Ç—å—Å—è –Ω–∞ INSERT –≤ slusar_complete_notifications
  // –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –¥–ª—è –ü—Ä–∏–π–º–∞–ª—å–Ω–∏–∫–∞ –ø–æ pruimalnyk
  // –í–∏–∫–ª–∏–∫–∞—î refreshActsTable() –ø—Ä–∏ –Ω–æ–≤–æ–º—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—ñ
  // –ü–æ–∫–∞–∑—É—î —Å–∏—Å—Ç–µ–º–Ω–µ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è
}
```

**–í–∏–∫–ª–∏–∫ –≤ —ñ—Å–Ω—É—é—á–æ–º—É –∫–æ–¥—ñ:**

```typescript
subscribeToActNotifications(); // —ñ—Å–Ω—É—é—á–∞ –ø—ñ–¥–ø–∏—Å–∫–∞
subscribeToSlusarNotifications(); // ‚Üê –ù–û–í–ê –ø—ñ–¥–ø–∏—Å–∫–∞
```

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –ø—Ä–∏ –Ω–æ–≤–æ–º—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—ñ:**

1. Realtime –æ—Ç—Ä–∏–º—É—î INSERT –∑ Supabase
2. –ü–µ—Ä–µ–≤—ñ—Ä—è—î: `userAccessLevel === "–ü—Ä–∏–π–º–∞–ª—å–Ω–∏–∫" && pruimalnyk !== currentUserName` ‚Üí –ø—Ä–æ–ø—É—Å–∫–∞—î
3. –í–∏–∫–ª–∏–∫–∞—î `refreshActsTable()` ‚Üí –∂–æ–≤—Ç–µ —Ñ–∞—Ä–±—É–≤–∞–Ω–Ω—è –æ–Ω–æ–≤–ª—é—î—Ç—å—Å—è
4. –ü–æ–∫–∞–∑—É—î —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è: _"‚úÖ –°–ª—é—Å–∞—Ä [–ü—Ä—ñ–∑–≤–∏—â–µ] –∑–∞–≤–µ—Ä—à–∏–≤ —Ä–æ–±–æ—Ç–∏ –≤ –∞–∫—Ç—ñ ‚Ññ[123]"_

---

### 5. modalMain.ts

**–ó–º—ñ–Ω–∏:**

**–î–æ–¥–∞–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è –ø—ñ–¥–ø–∏—Å–∫–∏:**

```typescript
function setupSlusarsOnRealtimeSubscription(actId: number) {
  // –ü—ñ–¥–ø–∏—Å—É—î—Ç—å—Å—è –Ω–∞ UPDATE acts WHERE act_id = actId
  // –û–Ω–æ–≤–ª—é—î –∑–∞–≥–æ–ª–æ–≤–æ–∫ (.zakaz_narayd-header) –ø—Ä–∏ –∑–º—ñ–Ω—ñ slusarsOn
}
```

**–í–∏–∫–ª–∏–∫ –≤ `showModal()`:**

```typescript
// –ü–µ—Ä–µ–¥ showNotification("–î–∞–Ω—ñ —É—Å–ø—ñ—à–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ")
setupSlusarsOnRealtimeSubscription(actId);
```

**–û—á–∏—â–µ–Ω–Ω—è –ø—ñ–¥–ø–∏—Å–∫–∏:**

```typescript
export function cleanupSlusarsOnSubscription() {
  // –í–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –ø—Ä–∏ –∑–∞–∫—Ä–∏—Ç—Ç—ñ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞
}
```

---

### 6. modalUI.ts

**–ó–º—ñ–Ω–∏:**

**–Ü–º–ø–æ—Ä—Ç:**

```typescript
import { cleanupSlusarsOnSubscription } from "./modalMain";
```

**–í–∏–∫–ª–∏–∫ –ø—Ä–∏ –∑–∞–∫—Ä–∏—Ç—Ç—ñ:**

```typescript
closeBtn?.addEventListener("click", () => {
  // ... —ñ—Å–Ω—É—é—á–∏–π –∫–æ–¥ ...
  cleanupSlusarsOnSubscription(); // ‚Üê –ù–û–í–ï
});
```

---

## üîÑ –ü–æ—Ç—ñ–∫ –¥–∞–Ω–∏—Ö

### –°—Ü–µ–Ω–∞—Ä—ñ–π 1: –°–ª—é—Å–∞—Ä –∑–∞–≤–µ—Ä—à—É—î —Ä–æ–±–æ—Ç–∏

```
1. –°–ª—é—Å–∞—Ä ‚Üí –Ω–∞—Ç–∏—Å–∫–∞—î –∑–∞–º–æ–∫
2. knopka_zamok.ts ‚Üí –≤–∏–∫–ª–∏–∫–∞—î showSlusarConfirm()
3. –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è ‚Üí UPDATE acts SET slusarsOn=true
4. knopka_zamok.ts ‚Üí –≤–∏–∫–ª–∏–∫–∞—î recordSlusarCompletion()
5. –ó–∞–ø–∏—Å –≤ slusar_complete_notifications
   ‚Üì
6. Supabase Realtime ‚Üí broadcast INSERT
   ‚Üì
7a. tablucya.ts ‚Üí –æ—Ç—Ä–∏–º—É—î –ø–æ–¥—ñ—é ‚Üí refreshActsTable()
7b. modalMain.ts ‚Üí –æ—Ç—Ä–∏–º—É—î UPDATE acts ‚Üí –æ–Ω–æ–≤–ª—é—î –∑–∞–≥–æ–ª–æ–≤–æ–∫
   ‚Üì
8. –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä/–ü—Ä–∏–π–º–∞–ª—å–Ω–∏–∫ –±–∞—á–∏—Ç—å:
   - –ñ–æ–≤—Ç–∏–π —Ä—è–¥–æ–∫ –≤ —Ç–∞–±–ª–∏—Ü—ñ
   - –ñ–æ–≤—Ç–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –≤ –º–æ–¥–∞–ª—Ü—ñ (—è–∫—â–æ –≤—ñ–¥–∫—Ä–∏—Ç–∞)
   - –°–∏—Å—Ç–µ–º–Ω–µ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è
```

### –°—Ü–µ–Ω–∞—Ä—ñ–π 2: –ó–∞–∫—Ä–∏—Ç—Ç—è –∞–∫—Ç—É

```
1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á ‚Üí –∑–∞–∫—Ä–∏–≤–∞—î –∞–∫—Ç
2. knopka_zamok.ts ‚Üí UPDATE acts SET date_off=..., slusarsOn=false
3. knopka_zamok.ts ‚Üí –≤–∏–∫–ª–∏–∫–∞—î hideSlusarNotificationsForAct()
4. UPDATE slusar_complete_notifications SET delit=true
   ‚Üì
5. –ñ–æ–≤—Ç–µ —Ñ–∞—Ä–±—É–≤–∞–Ω–Ω—è –∑–Ω–∏–∫–∞—î (–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ !isClosed)
6. –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–∏—Ö–æ–≤–∞–Ω—ñ (delit=true)
```

---

## ‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### –î–æ–∑–≤–æ–ª–∏ (RLS Policies)

- **–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä** (`setting_id=1`): –ø–æ–≤–Ω–∏–π –¥–æ—Å—Ç—É–ø
- **–ü—Ä–∏–π–º–∞–ª—å–Ω–∏–∫** (`setting_id=2`): —Ç—ñ–ª—å–∫–∏ —Å–≤–æ—ó –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (`pruimalnyk`)
- **–°–ª—é—Å–∞—Ä** (`setting_id=3`): —Ç—ñ–ª—å–∫–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è

### –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è

**tablucya.ts:**

```typescript
if (userAccessLevel === "–ü—Ä–∏–π–º–∞–ª—å–Ω–∏–∫") {
  const notificationPruimalnyk = newNotification.pruimalnyk;
  if (notificationPruimalnyk !== currentUserName) {
    return; // –ü—Ä–æ–ø—É—Å–∫–∞—î–º–æ
  }
}
```

**modalMain.ts:**

```typescript
const shouldShowSlusarsOn =
  newSlusarsOn &&
  !isClosed &&
  (userAccessLevel === "–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä" ||
    userAccessLevel === "–°–ª—é—Å–∞—Ä" ||
    (userAccessLevel === "–ü—Ä–∏–π–º–∞–ª—å–Ω–∏–∫" &&
      updatedAct.pruimalnyk === currentUserName));
```

---

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –ö—Ä–æ–∫–∏ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏:

1. **–í–∏–∫–æ–Ω–∞—Ç–∏ SQL —Å–∫—Ä–∏–ø—Ç:**

   ```bash
   # –í Supabase Dashboard ‚Üí SQL Editor
   –í–∏–∫–æ–Ω–∞—Ç–∏: supabase/create_slusar_notifications_table.sql
   ```

2. **–ü–æ–±—É–¥—É–≤–∞—Ç–∏ –ø—Ä–æ–µ–∫—Ç:**

   ```bash
   npm run deploy2
   ```

3. **–¢–µ—Å—Ç 1: –°–ª—é—Å–∞—Ä –∑–∞–≤–µ—Ä—à—É—î —Ä–æ–±–æ—Ç–∏**

   - –£–≤—ñ–π—Ç–∏ —è–∫ –°–ª—é—Å–∞—Ä
   - –í—ñ–¥–∫—Ä–∏—Ç–∏ –∞–∫—Ç ‚Üí –Ω–∞—Ç–∏—Å–Ω—É—Ç–∏ –∑–∞–º–æ–∫ ‚Üí –ø—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏: `slusarsOn=true` –≤ –±–∞–∑—ñ
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏: –Ω–æ–≤–∏–π –∑–∞–ø–∏—Å –≤ `slusar_complete_notifications`

4. **–¢–µ—Å—Ç 2: –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä –±–∞—á–∏—Ç—å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è**

   - –£–≤—ñ–π—Ç–∏ —è–∫ –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä
   - –í—ñ–¥–∫—Ä–∏—Ç–∏ —Ç–∞–±–ª–∏—Ü—é –∞–∫—Ç—ñ–≤
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏: –∂–æ–≤—Ç–∏–π —Ä—è–¥–æ–∫ –¥–ª—è –∞–∫—Ç—É
   - –í—ñ–¥–∫—Ä–∏—Ç–∏ –∞–∫—Ç ‚Üí –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∂–æ–≤—Ç–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏: —Å–∏—Å—Ç–µ–º–Ω–µ —Å–ø–æ–≤—ñ—â–µ–Ω–Ω—è

5. **–¢–µ—Å—Ç 3: –ü—Ä–∏–π–º–∞–ª—å–Ω–∏–∫ –±–∞—á–∏—Ç—å —Ç—ñ–ª—å–∫–∏ —Å–≤–æ—ó –∞–∫—Ç–∏**

   - –£–≤—ñ–π—Ç–∏ —è–∫ –ü—Ä–∏–π–º–∞–ª—å–Ω–∏–∫
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏: –∂–æ–≤—Ç—ñ —Ç—ñ–ª—å–∫–∏ –∞–∫—Ç–∏ –¥–µ `pruimalnyk = –ü–Ü–ë`

6. **–¢–µ—Å—Ç 4: –ó–∞–∫—Ä–∏—Ç—Ç—è –∞–∫—Ç—É**
   - –ó–∞–∫—Ä–∏—Ç–∏ –∞–∫—Ç
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏: `slusarsOn=false`, `delit=true` –≤ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è—Ö
   - –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏: –∂–æ–≤—Ç–µ —Ñ–∞—Ä–±—É–≤–∞–Ω–Ω—è –∑–Ω–∏–∫–ª–æ

---

## üìä –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö

### –ó–∞–ø–∏—Ç–∏ –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏:

**–í—Å—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è:**

```sql
SELECT * FROM slusar_complete_notifications
WHERE delit = false
ORDER BY data DESC;
```

**–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∞–∫—Ç—É:**

```sql
SELECT * FROM slusar_complete_notifications
WHERE act_id = 123 AND delit = false;
```

**–ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –ø–æ –∞–∫—Ç—É:**

```sql
SELECT act_number, COUNT(*) as notifications_count
FROM slusar_complete_notifications
WHERE delit = false
GROUP BY act_number
ORDER BY notifications_count DESC;
```

**–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–ª—è –ü—Ä–∏–π–º–∞–ª—å–Ω–∏–∫–∞:**

```sql
SELECT * FROM slusar_complete_notifications
WHERE pruimalnyk = '–ü–µ—Ç—Ä–µ–Ω–∫–æ –ü–µ—Ç—Ä–æ' AND delit = false;
```

---

## üêõ –í—ñ–¥–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è

### –ö–æ–Ω—Å–æ–ª—å–Ω—ñ –ª–æ–≥–∏:

**knopka_zamok.ts:**

```
üìù [SlusarNotification] –ó–∞–ø–∏—Å –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è: –∞–∫—Ç #123, slusarsOn=true
‚úÖ [SlusarNotification] –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —É—Å–ø—ñ—à–Ω–æ –∑–∞–ø–∏—Å–∞–Ω–æ –¥–ª—è –∞–∫—Ç—É #123
```

**tablucya.ts:**

```
üì° –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ Realtime –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –ø—Ä–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ä–æ–±—ñ—Ç (–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä)...
üì° [Realtime INSERT] –û—Ç—Ä–∏–º–∞–Ω–æ –Ω–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è: {...}
üîÑ –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—ñ –¥–ª—è –∞–∫—Ç—É #123...
```

**modalMain.ts:**

```
üì° –ü—ñ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∑–º—ñ–Ω–∏ slusarsOn –¥–ª—è –∞–∫—Ç—É #123 (–ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä)
üì° [Realtime UPDATE] –ó–º—ñ–Ω–∞ slusarsOn: {...}
‚úÖ –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø–æ—Ñ–∞—Ä–±–æ–≤–∞–Ω–æ –≤ –∑–æ–ª–æ—Ç–∏–π (slusarsOn=true)
```

---

## üöÄ –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

1. ‚úÖ –í–∏–∫–æ–Ω–∞—Ç–∏ SQL –º—ñ–≥—Ä–∞—Ü—ñ—é
2. ‚úÖ –ü–æ–±—É–¥—É–≤–∞—Ç–∏ –ø—Ä–æ–µ–∫—Ç (`npm run deploy2`)
3. ‚úÖ –ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ –∑ —Ä–µ–∞–ª—å–Ω–∏–º–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏
4. ‚è≥ –î–æ–¥–∞—Ç–∏ –ª—ñ—á–∏–ª—å–Ω–∏–∫ –Ω–µ–ø–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
5. ‚è≥ –î–æ–¥–∞—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É "–í—Å—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è" (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

---

## üìù –î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

### –ü–æ–¥—ñ–±–Ω–∞ —Å–∏—Å—Ç–µ–º–∞: act_changes_notifications

–Ü—Å–Ω—É—é—á–∞ —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –∑–º—ñ–Ω –¥–µ—Ç–∞–ª–µ–π/—Ä–æ–±—ñ—Ç –≤ –∞–∫—Ç–∞—Ö:

- –¢–∞–±–ª–∏—Ü—è: `act_changes_notifications`
- –§—É–Ω–∫—Ü—ñ—è: `recordActChanges()` –≤ `act_change_tracker.ts`
- –ü—ñ–¥–ø–∏—Å–∫–∏: `subscribeToActNotifications()` –≤ `tablucya.ts`

**–†—ñ–∑–Ω–∏—Ü—è:**

- `act_changes_notifications` ‚Üí –∑–º—ñ–Ω–∏ **–≤–º—ñ—Å—Ç—É** –∞–∫—Ç—É (–¥–æ–¥–∞–Ω—ñ/–≤–∏–¥–∞–ª–µ–Ω—ñ –ø–æ–∑–∏—Ü—ñ—ó)
- `slusar_complete_notifications` ‚Üí –∑–º—ñ–Ω–∞ **—Å—Ç–∞—Ç—É—Å—É** –∞–∫—Ç—É (–∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ä–æ–±—ñ—Ç)

---

**–î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è:** 01.01.2026  
**–ê–≤—Ç–æ—Ä:** GitHub Copilot  
**–í–µ—Ä—Å—ñ—è:** 1.0
