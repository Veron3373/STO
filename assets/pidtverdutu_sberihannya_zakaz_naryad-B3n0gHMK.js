import{g as m,a as u,m as f}from"./main-DcNxIomJ.js";import{s as p}from"./supabaseClient-CaENmPBY.js";import"./supabase-DjCBILTv.js";import"./pdf-yBvge-Eo.js";const i="save-prompt-modal-create";function y(){const t=document.createElement("div");t.id=i,t.className="modal-create-overlay",t.style.display="none";const a=document.createElement("div");return a.className="modal-content-save",a.innerHTML=`
    <p>–°—Ç–≤–æ—Ä–∏—Ç–∏ –∑–∞–∫–∞–∑ –Ω–∞—Ä—è–¥?</p>
    <div class="save-buttons">
      <button id="save-confirm-create" class="btn-save-confirm">–¢–∞–∫</button>
      <button id="save-cancel-create" class="btn-save-cancel">–ù—ñ</button>
    </div>
  `,t.appendChild(a),t}function v(){const t=new Date,a=t.getFullYear(),e=String(t.getMonth()+1).padStart(2,"0"),o=String(t.getDate()).padStart(2,"0"),n=String(t.getHours()).padStart(2,"0"),r=String(t.getMinutes()).padStart(2,"0"),c=String(t.getSeconds()).padStart(2,"0");return`${a}-${e}-${o} ${n}:${r}:${c}`}function l(t,a){const e=document.createElement("div");e.textContent=t,e.style.position="fixed",e.style.bottom="50%",e.style.left="50%",e.style.transform="translateX(-50%)",e.style.backgroundColor=a,e.style.color="white",e.style.padding="12px 24px",e.style.borderRadius="8px",e.style.zIndex="10001",e.style.boxShadow="0 4px 12px rgba(0,0,0,0.2)",e.style.fontSize="16px",document.body.appendChild(e),setTimeout(()=>e.remove(),2500)}async function g(t,a){try{const e=v(),o={–§–æ—Ç–æ:[],–î–µ—Ç–∞–ª—ñ:[{–°—É–º–∞:0,–¶—ñ–Ω–∞:0,–î–µ—Ç–∞–ª—å:"",–ú–∞–≥–∞–∑–∏–Ω:"",–ö—ñ–ª—å–∫—ñ—Å—Ç—å:0}],–ü—Ä–æ–±—ñ–≥:0,–†–æ–±–æ—Ç–∏:[{–°—É–º–∞:0,–¶—ñ–Ω–∞:0,–†–æ–±–æ—Ç–∞:"",–°–ª—é—Å–∞—Ä:"",–ö—ñ–ª—å–∫—ñ—Å—Ç—å:0}],"–ó–∞ –¥–µ—Ç–∞–ª—ñ":0,"–ó–∞ —Ä–æ–±–æ—Ç—É":0,–ü—Ä–∏–π–º–∞–ª—å–Ω–∏–∫:"",–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:"","–ó–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞":0,"–ü—Ä–∏—á–∏–Ω–∞ –∑–≤–µ—Ä–Ω–µ–Ω–Ω—è":"","–ü—Ä–∏–±—É—Ç–æ–∫ –∑–∞ –¥–µ—Ç–∞–ª—ñ":0,"–ü—Ä–∏–±—É—Ç–æ–∫ –∑–∞ —Ä–æ–±–æ—Ç—É":0,–ê–≤–∞–Ω—Å:0},{error:n}=await p.from("acts").insert([{date_on:e,client_id:t,cars_id:a,data:o}]);return n?(console.error("‚ùå –ü–æ–º–∏–ª–∫–∞: –Ω–æ–≤–∏–π –∞–∫—Ç –Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–æ",n.message),!1):(console.log("‚úÖ –ê–∫—Ç —Å—Ç–≤–æ—Ä–µ–Ω–æ –æ",e),!0)}catch(e){return console.error("‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –∞–∫—Ç—É –≤ Supabase:",e.message),!1}}function w(){return new Promise(t=>{const a=document.getElementById(i);if(document.body.appendChild(y()),!a)return console.warn("‚ùå –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ:",i),t(!1);a.classList.add("active"),a.style.display="flex";const e=a.querySelector("#save-confirm-create"),o=a.querySelector("#save-cancel-create"),n=()=>{a.classList.remove("active"),a.style.display="none",e.removeEventListener("click",r),o.removeEventListener("click",c),a.remove()},r=async()=>{var d;try{const s=m();if(console.log("üÜï –î–∞–Ω—ñ –Ω–æ–≤–æ–≥–æ –∑–∞–ø–∏—Å—É:",JSON.stringify(s,null,2)),!s.client_id||!s.cars_id)return console.error("‚ùå –í—ñ–¥—Å—É—Ç–Ω—ñ –æ–±–æ–≤'—è–∑–∫–æ–≤—ñ –¥–∞–Ω—ñ: client_id –∞–±–æ cars_id"),l("‚ùå –ù–µ –≤–∏—Å—Ç–∞—á–∞—î ID –∫–ª—ñ—î–Ω—Ç–∞ –∞–±–æ –∞–≤—Ç–æ","#f44336"),n(),t(!1);e.disabled=!0,e.textContent="–°—Ç–≤–æ—Ä—é—î–º–æ...",await g(Number(s.client_id),Number(s.cars_id))?(l("‚úÖ –ó–∞–∫–∞–∑ –Ω–∞—Ä—è–¥ —É—Å–ø—ñ—à–Ω–æ —Å—Ç–≤–æ—Ä–µ–Ω–æ","#4caf50"),n(),t(!0),await u(),(d=document.getElementById(f))==null||d.remove()):(l("‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –∑–∞–∫–∞–∑ –Ω–∞—Ä—è–¥—É","#f44336"),e.disabled=!1,e.textContent="–¢–∞–∫",t(!1))}catch(s){console.error("üö® –í–Ω—É—Ç—Ä—ñ—à–Ω—è –ø–æ–º–∏–ª–∫–∞ —É onConfirm:",s.message),l("‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ –∑–∞–∫–∞–∑ –Ω–∞—Ä—è–¥—É","#f44336"),e.disabled=!1,e.textContent="–¢–∞–∫",n(),t(!1)}},c=()=>{n(),t(!1)};e.addEventListener("click",r),o.addEventListener("click",c)})}export{y as createSaveModalCreate,i as saveModalIdCreate,w as showSaveModalCreate};
