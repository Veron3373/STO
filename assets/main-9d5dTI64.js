var u=Object.defineProperty;var p=(t,e,a)=>e in t?u(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var c=(t,e,a)=>p(t,typeof e!="symbol"?e+"":e,a);import"./supabaseClient-CaENmPBY.js";import{l as f,a as l,i as S,s as I,u as g}from"./main-DcNxIomJ.js";import"./supabase-DjCBILTv.js";import"./pdf-yBvge-Eo.js";class Y{constructor(){c(this,"searchIcon");c(this,"searchInput");c(this,"onSearchCallback");this.searchIcon=$("#searchIcon"),this.searchInput=$("#searchInput"),this.initSearch()}initSearch(){this.searchInput.css({width:"0",padding:"0",opacity:"0",visibility:"hidden"}),this.bindEvents()}bindEvents(){this.searchIcon.on("click",()=>this.toggleSearchInput()),this.searchInput.on("input",()=>this.handleSearchInput())}toggleSearchInput(){this.searchInput.width()===0?this.showSearchInput():this.hideSearchInput()}showSearchInput(){this.searchInput.css("visibility","visible"),this.searchInput.animate({width:"200px",padding:"3px 7px",opacity:"1"},300,()=>this.searchInput.focus())}hideSearchInput(){this.searchInput.animate({width:"0",padding:"0",opacity:"0"},300,()=>{this.searchInput.css("visibility","hidden"),this.searchInput.val(""),this.onSearchCallback&&this.onSearchCallback("")})}handleSearchInput(){var a;const e=((a=this.searchInput.val())==null?void 0:a.trim())||"";console.log("Термін пошуку:",e),this.onSearchCallback&&this.onSearchCallback(e)}setSearchCallback(e){this.onSearchCallback=e}setSearchValue(e){this.searchInput.val(e),this.onSearchCallback&&this.onSearchCallback(e)}getSearchValue(){var e;return((e=this.searchInput.val())==null?void 0:e.trim())||""}clearSearch(){this.searchInput.val(""),this.onSearchCallback&&this.onSearchCallback("")}isSearchOpen(){return this.searchInput.width()>0}}function b(t,e,a){const s=new Y;return s.setSearchCallback(n=>{const o=e(),{dateFrom:i,dateTo:r}=a();o==="open"?t(null,null,"open",n):t(i,r,null,n)}),s}window.logoutFromSystemAndRedirect=f;function k(t){const e=document.getElementById("menu-items-to-hide");e&&(e.style.display="flex")}function m(){let t="open",e=null,a=null,s=!1;if(s)return;s=!0,$("#dateRangePicker").daterangepicker({locale:{format:"DD.MM.YYYY",separator:" - ",applyLabel:"Прийняти",cancelLabel:"Відмінити",fromLabel:"Від",toLabel:"До",weekLabel:"Тиж",daysOfWeek:["Нд","Пн","Вт","Ср","Чт","Пт","Сб"],monthNames:["Січень","Лютий","Березень","Квітень","Травень","Червень","Липень","Серпень","Вересень","Жовтень","Листопад","Грудень"],firstDay:1},opens:"center",alwaysShowCalendars:!0,autoUpdateInput:!1,startDate:moment().startOf("year"),endDate:moment(),ranges:{Відкриті:[moment().startOf("year"),moment()],Закриті:[moment("02.01.2025","DD.MM.YYYY"),moment()],"Від початку":[moment("03.01.2025","DD.MM.YYYY"),moment()],Сьогодні:[moment(),moment()],"Останні 7 днів":[moment().subtract(6,"days"),moment()],"Поточний місяць":[moment().startOf("month"),moment().endOf("month")],"Минулий місяць":[moment().subtract(1,"month").startOf("month"),moment().subtract(1,"month").endOf("month")]},showCustomRangeLabel:!1},function(i,r,h){if(h==="Відкриті")$("#dateRangePicker").val("Відкриті"),$("#dateRangePicker").data("daterangepicker").element.removeClass("active-range"),t="open",e=null,a=null,l(null,null,"open"),this.setStartDate(moment().startOf("year")),this.setEndDate(moment());else if(h==="Закриті")$("#dateRangePicker").val("Закриті"),$("#dateRangePicker").data("daterangepicker").element.removeClass("active-range"),t="closed",e=null,a=null,l(null,null,"closed"),this.setStartDate(moment("02.01.2025","DD.MM.YYYY")),this.setEndDate(moment());else{const d=`${i.format("DD.MM.YYYY")} - ${r.format("DD.MM.YYYY")}`;$("#dateRangePicker").val(d),$("#dateRangePicker").data("daterangepicker").element.addClass("active-range"),t="date_range",e=i.format("YYYY-MM-DD 00:00:00"),a=r.format("YYYY-MM-DD 23:59:59"),l(e,a,null)}}),$("#dateRangePicker").val("Відкриті"),t="open";const n=$("#dateRangePicker").data("daterangepicker");n&&(n.setStartDate(moment().startOf("year")),n.setEndDate(moment()));const o=b(l,()=>t,()=>({dateFrom:e,dateTo:a}));window.searchHandler=o,S(),k()}window.initializeSystem=m;async function y(){const t=await I();t?(await g(t),m()):console.error("❌ Вхід не вдалося здійснити. Система не ініціалізована.")}y();
