# üîê –†–µ–∞–ª-—Ç–∞–π–º –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø—É –¥–æ —Å—Ç–æ—Ä—ñ–Ω–æ–∫

## –ü—Ä–æ–±–ª–µ–º–∞

–ö–æ–ª–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á (–ü—Ä–∏–π–º–∞–ª—å–Ω–∏–∫, –°–∫–ª–∞–¥–æ–≤—â–∏–∫, –ó–∞–ø—á–∞—Å—Ç–∏—Å—Ç) –≤—ñ–¥–∫—Ä–∏–≤ —Å—Ç–æ—Ä—ñ–Ω–∫—É –ë—É—Ö–≥–∞–ª—Ç–µ—Ä—ñ—ó –∞–±–æ –ü–ª–∞–Ω—É–≤–∞–ª—å–Ω–∏–∫–∞, —ñ –ø–æ—Ç—ñ–º –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä –∑–∞–±–æ—Ä–æ–Ω–∏–≤ –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è - –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º—ñ–≥ –ø—Ä–æ–¥–æ–≤–∂—É–≤–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ç–∏—Å—è –±–µ–∑ –ø—Ä–æ–±–ª–µ–º –¥–æ –ø–æ–≤–Ω–æ–≥–æ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ç–æ—Ä—ñ–Ω–∫–∏.

## –†—ñ—à–µ–Ω–Ω—è

–î–æ–¥–∞–Ω–æ **—Ä–µ–∞–ª-—Ç–∞–π–º –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –¥–æ—Å—Ç—É–ø—É** –ø—Ä–∏ –∑–º—ñ–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å:

### 1. –ù–æ–≤–∏–π –º–æ–¥—É–ª—å `page_access_guard.ts`

**–§—É–Ω–∫—Ü—ñ—ó:**
- `checkCurrentPageAccess()` - –ø–µ—Ä–µ–≤—ñ—Ä—è—î —á–∏ –º–∞—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –¥–æ—Å—Ç—É–ø –¥–æ –ø–æ—Ç–æ—á–Ω–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏
- `enforcePageAccess()` - –ø–µ—Ä–µ–≤—ñ—Ä—è—î –¥–æ—Å—Ç—É–ø —ñ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏—Ç—å —è–∫—â–æ –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ
- `getPageNameForDebug()` - –æ—Ç—Ä–∏–º–∞—Ç–∏ –Ω–∞–∑–≤—É —Å—Ç–æ—Ä—ñ–Ω–∫–∏ (–¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è)

**–ú–∞–ø–∞ –¥–æ—Å—Ç—É–ø—É:**
```typescript
const PAGE_ACCESS_SETTINGS = {
  "bukhhalteriya.html": {
    –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä: null,  // –∑–∞–≤–∂–¥–∏ –º–∞—î –¥–æ—Å—Ç—É–ø
    –ü—Ä–∏–π–º–∞–ª—å–Ω–∏–∫: 4,       // setting_id
    –ó–∞–ø—á–∞—Å—Ç–∏—Å—Ç: 2,
    –°–∫–ª–∞–¥–æ–≤—â–∏–∫: null,     // –Ω–µ–º–∞—î –æ–∫—Ä–µ–º–æ–≥–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
  },
  "planyvannya.html": {
    –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä: null,
    –ü—Ä–∏–π–º–∞–ª—å–Ω–∏–∫: 21,
    –°–ª—é—Å–∞—Ä: 6,
    –ó–∞–ø—á–∞—Å—Ç–∏—Å—Ç: 23,
    –°–∫–ª–∞–¥–æ–≤—â–∏–∫: 20,
  }
};
```

### 2. –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤ `settings_subscription.ts`

–ü—Ä–∏ –æ—Ç—Ä–∏–º–∞–Ω–Ω—ñ –∑–º—ñ–Ω–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è `enforcePageAccess()`:

```typescript
async function handleSettingsChange(payload: any) {
  // ... –æ–Ω–æ–≤–ª–µ–Ω–Ω—è UI ...
  
  // üîê –ö–†–ò–¢–ò–ß–ù–û: –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —á–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —â–µ –º–∞—î –¥–æ—Å—Ç—É–ø
  await enforcePageAccess();
  
  showNotification("–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –æ–Ω–æ–≤–ª–µ–Ω–æ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º", "info", 3000);
}
```

### 3. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏

–û–Ω–æ–≤–ª–µ–Ω–æ guard-—Ñ–∞–π–ª–∏:
- `bukhhalteriya_auth_guard.ts`
- `planyvannya_auth_guard.ts`

```typescript
// –ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ—ó –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
await enforcePageAccess(); // –ø–µ—Ä–µ–≤—ñ—Ä—è—î –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ä–æ–ª—ñ
document.body.classList.add("auth-verified");
```

## –õ–æ–≥—ñ–∫–∞ —Ä–æ–±–æ—Ç–∏

### –°—Ü–µ–Ω–∞—Ä—ñ–π 1: –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤—ñ–¥–∫—Ä–∏–≤–∞—î —Å—Ç–æ—Ä—ñ–Ω–∫—É
1. Google –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è ‚úÖ
2. Email whitelist ‚úÖ
3. **–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å —Ä–æ–ª—ñ** ‚úÖ
4. –Ø–∫—â–æ –¥–æ—Å—Ç—É–ø –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ main.html

### –°—Ü–µ–Ω–∞—Ä—ñ–π 2: –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø—Ä–∞—Ü—é—î –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ
1. Real-time –ø—ñ–¥–ø–∏—Å–∫–∞ –æ—Ç—Ä–∏–º—É—î –∑–º—ñ–Ω—É –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
2. –û–Ω–æ–≤–ª—é—î—Ç—å—Å—è UI (–º–µ–Ω—é, –∫–Ω–æ–ø–∫–∏, —Å—Ç–æ–≤–ø—Ü—ñ)
3. **–ü–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è –¥–æ—Å—Ç—É–ø –¥–æ –ø–æ—Ç–æ—á–Ω–æ—ó —Å—Ç–æ—Ä—ñ–Ω–∫–∏**
4. –Ø–∫—â–æ –∞–¥–º—ñ–Ω –∑–∞–±—Ä–∞–≤ –¥–æ—Å—Ç—É–ø ‚Üí alert + —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ main.html

## –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ë—É—Ö–≥–∞–ª—Ç–µ—Ä—ñ—è - –ü—Ä–∏–π–º–∞–ª—å–Ω–∏–∫
- **setting_id = 4**: "–ë—É—Ö–≥–∞–ª—Ç–µ—Ä—ñ—è"
- –ê–¥–º—ñ–Ω –≤–∏–º–∏–∫–∞—î ‚Üí `–ü—Ä–∏–π–º–∞–ª—å–Ω–∏–∫` –∫–æ–ª–æ–Ω–∫–∞ = `false`
- –ü—Ä–∏–π–º–∞–ª—å–Ω–∏–∫ –æ—Ç—Ä–∏–º—É—î –ø–æ–¥—ñ—ó ‚Üí `enforcePageAccess()` ‚Üí **—Ä–µ–¥–∏—Ä–µ–∫—Ç**

### –ü–ª–∞–Ω—É–≤–∞–Ω–Ω—è - –ó–∞–ø—á–∞—Å—Ç–∏—Å—Ç
- **setting_id = 23**: "–ü–ª–∞–Ω—É–≤–∞–Ω–Ω—è"
- –ê–¥–º—ñ–Ω –≤–∏–º–∏–∫–∞—î ‚Üí `–ó–∞–ø—á–∞—Å—Ç–∏—Å—Ç` –∫–æ–ª–æ–Ω–∫–∞ = `false`
- –ó–∞–ø—á–∞—Å—Ç–∏—Å—Ç –æ—Ç—Ä–∏–º—É—î –ø–æ–¥—ñ—ó ‚Üí `enforcePageAccess()` ‚Üí **—Ä–µ–¥–∏—Ä–µ–∫—Ç**

## –ü–µ—Ä–µ–≤–∞–≥–∏

‚úÖ **–ú–∏—Ç—Ç—î–≤–∞ —Ä–µ–∞–∫—Ü—ñ—è** - –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –º–æ–∂–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –ø—ñ—Å–ª—è –∑–∞–±–æ—Ä–æ–Ω–∏  
‚úÖ **–ë–µ–∑–ø–µ—á–Ω—ñ—Å—Ç—å** - –Ω–µ–º–∞—î bypass —á–µ—Ä–µ–∑ –≤—ñ–¥–∫—Ä–∏—Ç—É –≤–∫–ª–∞–¥–∫—É  
‚úÖ **User-friendly** - alert –ø–æ–ø–µ—Ä–µ–¥–∂–∞—î –ø—Ä–æ —Ä–µ–¥–∏—Ä–µ–∫—Ç  
‚úÖ **–£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω—ñ—Å—Ç—å** - –ø—Ä–∞—Ü—é—î –¥–ª—è –≤—Å—ñ—Ö —Ä–æ–ª–µ–π —ñ —Å—Ç–æ—Ä—ñ–Ω–æ–∫

## –ù–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è

```javascript
// –í –∫–æ–Ω—Å–æ–ª—ñ –±—Ä–∞—É–∑–µ—Ä–∞
import { getPageNameForDebug, checkCurrentPageAccess } from "./page_access_guard";

console.log(getPageNameForDebug()); // "bukhhalteriya.html"
await checkCurrentPageAccess(); // true/false
```

## –õ–æ–≥–∏

```
üîç –î–æ—Å—Ç—É–ø –¥–æ bukhhalteriya.html –¥–ª—è –ó–∞–ø—á–∞—Å—Ç–∏—Å—Ç: setting_id=2, –ó–∞–ø—á–∞—Å—Ç–∏—Å—Ç=true
‚úÖ –î–æ—Å—Ç—É–ø –¥–æ–∑–≤–æ–ª–µ–Ω–æ

üîç –î–æ—Å—Ç—É–ø –¥–æ planyvannya.html –¥–ª—è –°–∫–ª–∞–¥–æ–≤—â–∏–∫: setting_id=20, –°–∫–ª–∞–¥–æ–≤—â–∏–∫=false
‚õî –î–æ—Å—Ç—É–ø –¥–æ planyvannya.html –¥–ª—è –°–∫–ª–∞–¥–æ–≤—â–∏–∫ –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º
‚Üí –†–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ main.html
```

## –§–∞–π–ª–∏

- `src/ts/roboha/zakaz_naraudy/inhi/page_access_guard.ts` - –Ω–æ–≤–∏–π –º–æ–¥—É–ª—å
- `src/ts/roboha/zakaz_naraudy/inhi/settings_subscription.ts` - –¥–æ–¥–∞–Ω–æ –≤–∏–∫–ª–∏–∫
- `src/ts/roboha/bukhhalteriya/bukhhalteriya_auth_guard.ts` - –¥–æ–¥–∞–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É
- `src/ts/roboha/planyvannya/planyvannya_auth_guard.ts` - –¥–æ–¥–∞–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É
