# Швидкий Старт - Settings Real-Time

## 🚀 Швидке Встановлення

### 1. Виконати SQL в Supabase

Відкрити **SQL Editor** в Supabase Dashboard і виконати:

```bash
supabase/enable_settings_realtime.sql
```

### 2. Перевірити що працює

Після деплою коду, відкрити консоль браузера. Повинні бути логи:

```
🚀 Ініціалізація real-time підписки на settings...
✅ Підписка на settings активна
```

## ✅ Тест

### Швидкий тест в 2 вкладках:

**Вкладка 1** (Адміністратор):
1. Відкрити Налаштування
2. Вибрати роль "Приймальник"
3. Змінити чекбокс (наприклад, "Бухгалтерія")
4. Натиснути ОК

**Вкладка 2** (Приймальник):
- Має з'явитися повідомлення
- UI має оновитися автоматично
- Без перезавантаження!

## 📋 Що було додано

### Нові файли:

1. `src/ts/roboha/zakaz_naraudy/inhi/settings_subscription.ts`
   - Логіка real-time підписки
   - Оновлення UI

2. `src/ts/roboha/zakaz_naraudy/inhi/settings_realtime_init.ts`
   - Автоматична ініціалізація

3. `supabase/enable_settings_realtime.sql`
   - SQL налаштування БД

4. `docs/SETTINGS_REALTIME.md`
   - Повна документація

### Змінені файли:

1. `src/ts/main.ts`
   - Додано імпорт `settings_realtime_init`

## 🎯 Як використовувати

Нічого додатково робити не потрібно! 

Підписка автоматично:
- Запускається при завантаженні сторінки
- Відстежує зміни в БД
- Оновлює UI для кожної ролі
- Показує повідомлення користувачам

## 🔧 Налаштування по ролям

| Роль | Що оновлюється автоматично |
|------|---------------------------|
| Адміністратор | Всі зміни |
| Приймальник | Налаштування, Бухгалтерія, Планування, Акти |
| Слюсар | Зарплата, Акт Закриття |
| Запчастист | Акт Закриття із зауваженнями, PDF |
| Складовщик | Бухгалтерія Деталі |

## 📊 Структура БД settings

```
┌─────────────┬──────┬─────────┬────────────────┬──────────┬─────────┬──────────────┬──────────────┐
│ setting_id  │ data │ procent │ Приймальник    │ Слюсар   │ Запчаст │ Складовщик   │ Списоар      │
├─────────────┼──────┼─────────┼────────────────┼──────────┼─────────┼──────────────┼──────────────┤
│ 1           │ TRUE │ NULL    │ TRUE           │ FALSE    │ FALSE   │ FALSE        │ FALSE        │
│ 2           │ TRUE │ NULL    │ TRUE           │ FALSE    │ FALSE   │ FALSE        │ FALSE        │
│ 3           │ TRUE │ NULL    │ TRUE           │ TRUE     │ FALSE   │ FALSE        │ TRUE         │
│ 4           │ TRUE │ 10      │ TRUE           │ FALSE    │ FALSE   │ FALSE        │ FALSE        │
└─────────────┴──────┴─────────┴────────────────┴──────────┴─────────┴──────────────┴──────────────┘
```

**Колонки:**
- `data` - загальні налаштування (для всіх)
- `Приймальник`, `Слюсар`, `Запчастист`, `Складовщик` - специфічні для ролі

## 🎉 Готово!

Тепер зміни в налаштуваннях застосовуються миттєво для всіх користувачів без перезавантаження сторінки!

---

**Детальна документація:** `docs/SETTINGS_REALTIME.md`
